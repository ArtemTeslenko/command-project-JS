{"mappings":"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","sources":["src/js/reference/homeRefs.js","src/js/customFunction/getGenreName.js","src/js/markup/trendfilmsMarkup.js","src/js/controls/trendsControl.js","src/js/modal/markupFilmForodal.js","src/js/modal/fetchFilmId.js","src/js/markup/markupBtnModalFilm.js","src/js/modal/commonModalOpen.js","src/js/requests/fetchFilmsTrends.js","src/js/requests/fetchGenreId.js","src/js/render/filmsTrendRender.js"],"sourcesContent":["export const refs = {\n  logoEl: document.querySelector('.header-logo'),\n  backdropEl: document.querySelector('.backdrop'),\n  buttonCloseEl: document.querySelector('.modal__button'),\n  bodyEl: document.querySelector('body'),\n  mainEl: document.querySelector('main'),\n  bodyNoScrollEl: document.querySelector('[data-nonScroll]'),\n};\n","import { genreIdArr } from '../controls/trendsControl';\n\nexport function getGenreName(genre_ids) {\n  let genreName = [];\n\n  genre_ids.forEach(genre_id => {\n    genreName.push(genreIdArr.find(genre => genre.id === genre_id).name);\n  });\n\n  if (genreName.length > 2) {\n    genreName = genreName.slice(0, 2);\n    genreName.push('Other');\n  }\n  return genreName;\n}\n","import { getGenreName } from '../customFunction/getGenreName';\n\nexport function createFilmMarkup(arrFilms) {\n  return arrFilms\n    .map(({ original_title, release_date, genre_ids, poster_path, id }) => {\n      let genres = getGenreName(genre_ids);\n\n      if (genres.length > 2) {\n        genres = genres.slice(0, 2);\n        genres.push('Other');\n      }\n      genres = genres.join(', ');\n\n      const date = new Date(release_date);\n      const yearRelease = date.getFullYear();\n      return `<div class=\"film-card\">\n      <a class=\"film-card__link link\" href=\"\">\n      <div class=\"film-card__img-box\">\n        \n        <img class=\"film-card__img\"\n          src=\"https://www.themoviedb.org/t/p/w500/${poster_path}\"\n          alt=\"\"\n          id=\"${id}\"\n        />\n        </div>\n      \n        <div class=\"film-card__info\">\n          <h2 class=\"film-card__name film-card__item\">\n            ${original_title}\n          </h2>\n          <p class=\"film-card__data film-card__item\">\n            ${genres} | ${yearRelease}\n          </p>\n        </div>\n      </a>\n    </div>`;\n    })\n    .join('');\n}\n","import { fetchFilmsTrends } from '../requests';\nimport { fetchGenreId } from '../requests';\nimport { filmsTrendRender } from '../render/filmsTrendRender';\nexport let genreIdArr = [];\nexport function trendsControls() {\n  let page = 1;\n\n  fetchGenreId()\n    .then(genreId => {\n      genreIdArr = genreId.genres;\n    })\n    .catch(error => console.log(error));\n  const uplPart = 'movie/week';\n  fetchFilmsTrends(page, uplPart).then(data => {\n    const destinationEl = document.querySelector('.films-gallery');\n    filmsTrendRender(data, destinationEl);\n  });\n} //это святое\n","import { fetchFilmId } from './fetchFilmId';\nimport { markupBtnModalFilm } from '../markup';\n\nlet film = {};\nconst modalCardEl = document.querySelector('.modal-card');\n\nexport async function FetchFilmId(id) {\n  await fetchFilmId(id).then(respons => {\n    film = respons;\n    return film;\n  });\n\n  console.log('return', film);\n\n  const marcup = markupBtnModalFilm(film);\n  return (modalCardEl.innerHTML = marcup);\n}\n\nexport function clianFilmCard() {\n  return (modalCardEl.innerHTML = '');\n}\n","const KEY = '45074c10b8f2ea3914a60876b2d17a1a';\nconst BASEURL = 'https://api.themoviedb.org/3/';\n\n\nexport function fetchFilmId(movie_id) {\n    const arrFilms = fetch(`${BASEURL}/movie/${movie_id}?api_key=${KEY}`)\nreturn arrFilms.then( response=> {\nif(!response.ok){\n    throw new Error(response.status)\n}\nconsole.log(response);\nreturn response.json();\n})\n}\n\n","import { FetchFilmId } from '../markup';\n\nexport function markupBtnModalFilm(film) {\n  return `<img class=\"modal-card__img\"\n     src=\"https://www.themoviedb.org/t/p/w500/${film.poster_path}\"\n     alt=\"\"\n     id=\"\"\n    />\n    <div class=\"modal-card__info\">\n     <h2>${film.title}</h2>\n     <div class=\"table\">\n     <ul class=\"table__parametr\">\n       <li class=\"list\">Vote/Votes </li>\n       <li class=\"list\">Popularity </li>\n       <li class=\"list\">Original Title </li>\n     </ul>\n         <ul class=\"table__value\">\n       <li class=\"list\"><span>${film.vote_average}</span>/<span>${film.vote_count}</span></li>\n       <li class=\"list\">${film.popularity}</li>\n       <li class=\"list\">${film.original_title}</li>\n     </ul>\n     </div>\n     <p>\n       <h3>About</h3>\n       <div>${film.overview}</div>\n     </p>\n     <button class=\"button\">add to Watched</button>\n     <button class=\"button\">add to queue</button>\n      </div>`;\n}\n","// import { testOnClickFetchFilmId } from '../modal'\nimport { refs } from '../../js/reference/homeRefs';\nimport { FetchFilmId } from '../modal';\nimport { clianFilmCard } from './markupFilmForodal';\n\nlet filmCardLink = 0;\nlet filmCardLinkId = 0;\n\n\nfunction onClouseModal(e) {\n  refs.backdropEl.classList.add('is-hidden');\n  refs.bodyNoScrollEl.classList.remove('no-scroll');\n  clianFilmCard();\n}\n\nfunction onClouseModalBackdrop(e) {\n  if (e.target === e.currentTarget) {\n    refs.backdropEl.classList.add('is-hidden');\n    refs.bodyNoScrollEl.classList.remove('no-scroll');\n  }\n  return;\n}\n\nfunction onOpenModal(e) {\n  refs.backdropEl.classList.remove('is-hidden');\n  refs.bodyEl.addEventListener('keydown', creatKeydownEscape);\n\n  refs.bodyNoScrollEl.classList.toggle('no-scroll');\n  // // ----------\n  // window.addEventListener('scroll', e => {\n  //   window.scrollTo(0, 0);\n  // });\n  // //------------\n\n  function creatKeydownEscape(e) {\n    if (e.code === 'Escape') {\n      refs.backdropEl.classList.add('is-hidden');\n      refs.bodyEl.removeEventListener('keydown', creatKeydownEscape);\n    }\n  }\n}\n\nfunction onEventListenerClick(e) {\n  e.preventDefault();\n  filmCardLink = e.target;\n  filmCardLinkId = e.target.id;\n  if (filmCardLink !== e.currentTarget) {\n    FetchFilmId(filmCardLinkId);\n    onOpenModal(filmCardLink);\n  }\n}\n\nexport function onClick(btn) {\n  btn.addEventListener('click', onOpenModal);\n  refs.buttonCloseEl.addEventListener('click', onClouseModal);\n  refs.backdropEl.addEventListener('click', onClouseModalBackdrop);\n}\n\nexport function onOpenModalFilm(e) {\n  refs.mainEl.addEventListener('click', onEventListenerClick);\n  refs.buttonCloseEl.addEventListener('click', onClouseModal);\n  refs.backdropEl.addEventListener('click', onClouseModalBackdrop);\n}\n","const BASEURL = 'https://api.themoviedb.org/3/trending/';\nconst keyApi = '894ef72300682f1db325dae2afe3e7e2';\n\nexport function fetchFilmsTrends(page, urlPart) {\n  return fetch(`${BASEURL}${urlPart}?api_key=${keyApi}&page=${page}`).then(\n    response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    }\n  );\n}\n","export function fetchGenreId() {\n  return fetch(\n    'https://api.themoviedb.org/3/genre/movie/list?api_key=894ef72300682f1db325dae2afe3e7e2&language=en-US'\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json();\n  });\n}\n","import { createFilmMarkup } from '../markup/trendfilmsMarkup';\n//const galleryEl = document.querySelector('.films-gallery');\nexport function filmsTrendRender(data, destinationEl) {\n  const imgMarkUp = createFilmMarkup(data.results);\n  destinationEl.insertAdjacentHTML('beforeend', imgMarkUp);\n}\n"],"names":["$a111eb1c0b418884$export$21666b427502ea6d","logoEl","document","querySelector","backdropEl","buttonCloseEl","bodyEl","mainEl","bodyNoScrollEl","$708087666b1a495c$export$e1e489d92e562b7b","genre_ids","genreName","forEach","genre_id","push","$25176f203a4c7d2e$export$88c94c87660d44ec","find","genre","id","name","length","slice","$19aedebb0ec4ed46$export$34f980816dd5ca83","arrFilms","map","original_title","release_date","poster_path","genres","join","Date","getFullYear","$61c079253e998c44$var$film","$61c079253e998c44$var$modalCardEl","async","$61c079253e998c44$export$eb977ef7ffa021ce","movie_id","fetch","then","response","ok","Error","status","console","log","json","respons","marcup","film","title","vote_average","vote_count","popularity","overview","innerHTML","$008b226b4f7cc992$var$filmCardLink","$008b226b4f7cc992$var$filmCardLinkId","$008b226b4f7cc992$var$onClouseModal","e","classList","add","remove","$008b226b4f7cc992$var$onClouseModalBackdrop","target","currentTarget","$008b226b4f7cc992$var$onOpenModal","e1","addEventListener","creatKeydownEscape","code","removeEventListener","toggle","$008b226b4f7cc992$var$onEventListenerClick","preventDefault","page","urlPart","genreId","catch","error","data","destinationEl","imgMarkUp","results","insertAdjacentHTML"],"version":3,"file":"index.c47f7a64.js.map"}