{"mappings":"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","sources":["src/js/reference/homeRefs.js","src/js/customFunction/getGenreName.js","src/js/markup/trendfilmsMarkup.js","src/js/controls/trendsControl.js","src/js/controls/scrollTop.js","src/js/reference/libraryRefs.js","src/js/modal/markupFilmForodal.js","src/js/modal/fetchFilmId.js","src/js/markup/markupBtnModalFilm.js","src/js/modal/commonModalOpen.js","src/js/requests/fetchFilmsTrends.js","src/js/requests/fetchGenreId.js","src/js/render/filmsTrendRender.js","src/index.js"],"sourcesContent":["export const refs = {\n  bodyEl: document.querySelector('body'),\n  mainEl: document.querySelector('main'),\n  logoEl: document.querySelector('.header-logo'),\n  backdropEl: document.querySelector('.backdrop'),\n  buttonCloseEl: document.querySelector('.modal__button'),\n  bodyNoScrollEl: document.querySelector('[data-nonScroll]'),\n  scrollBtnEl: document.querySelector('.arrow-up'),\n  filmCardLinkEl: document.querySelector('.film-card__link'),\n  filmsGalleryEl: document.querySelector('.films-gallery'),\n  footerBtn: document.querySelector('.footer__btn'),\n};\n","import { genreIdArr } from '../controls/trendsControl';\n\nexport function getGenreName(genre_ids) {\n  let genreName = [];\n\n  genre_ids.forEach(genre_id => {\n    genreName.push(genreIdArr.find(genre => genre.id === genre_id).name);\n  });\n\n  if (genreName.length > 2) {\n    genreName = genreName.slice(0, 2);\n    genreName.push('Other');\n  }\n  return genreName;\n}\n","import { getGenreName } from '../customFunction/getGenreName';\n\nexport function createFilmMarkup(arrFilms) {\n  return arrFilms\n    .map(({ original_title, release_date, genre_ids, poster_path, id }) => {\n      let genres = getGenreName(genre_ids);\n\n      if (genres.length > 2) {\n        genres = genres.slice(0, 2);\n        genres.push('Other');\n      }\n      genres = genres.join(', ');\n\n      const date = new Date(release_date);\n      const yearRelease = date.getFullYear();\n      return `<div class=\"film-card\">\n      <a class=\"film-card__link link\" href=\"\" id=\"${id}\">\n      <div class=\"film-card__img-box\">\n        \n        <img class=\"film-card__img\"\n          src=\"https://www.themoviedb.org/t/p/w500/${poster_path}\"\n          alt=\"\"\n          \n        />\n        </div>\n      \n        <div class=\"film-card__info\">\n          <h2 class=\"film-card__name film-card__item\">\n            ${original_title}\n          </h2>\n          <p class=\"film-card__data film-card__item\">\n            ${genres} | ${yearRelease}\n          </p>\n        </div>\n      </a>\n    </div>`;\n    })\n    .join('');\n}\n","import { fetchFilmsTrends } from '../requests';\nimport { fetchGenreId } from '../requests';\nimport { filmsTrendRender } from '../render/filmsTrendRender';\nexport let genreIdArr = [];\nexport function trendsControls() {\n  let page = 1;\n\n  fetchGenreId()\n    .then(genreId => {\n      genreIdArr = genreId.genres;\n    })\n    .catch(error => console.log(error));\n  const uplPart = 'movie/week';\n  fetchFilmsTrends(page, uplPart).then(data => {\n    const destinationEl = document.querySelector('.films-gallery');\n    filmsTrendRender(data, destinationEl);\n  });\n} //это святое\n","import { refs } from '../reference/homeRefs';\nfunction onScrollShowArrow() {\n  if (window.scrollY > 700) {\n    refs.scrollBtnEl.classList.remove('isHiddenBtn');\n  } else if (window.scrollY < 700) {\n    refs.scrollBtnEl.classList.add('isHiddenBtn');\n  }\n}\nfunction onClickArrow() {\n  window.scrollTo(0, 0);\n}\n\nexport function scrollToTop() {\n  window.addEventListener('scroll', onScrollShowArrow);\n  refs.scrollBtnEl.addEventListener('click', onClickArrow);\n}\n","export const refs = {\n  loadMoreBtnEl: document.querySelector('.load-more-btn'),\n  bodyEl: document.querySelector('body'),\n  backdropEl: document.querySelector('.backdrop'),\n  buttonCloseEl: document.querySelector('.modal__button'),\n  bodyNoScrollEl: document.querySelector('[data-nonScroll]'),\n  filmCardLinkEl: document.querySelector('.film-card__link'),\n  filmsGalleryEl: document.querySelector('.films-gallery'),\n  footerBtn: document.querySelector('.footer__btn'),\n};\n","import { fetchFilmId } from './fetchFilmId';\nimport { markupBtnModalFilm } from '../markup';\n\nlet film = {};\nconst modalCardEl = document.querySelector('.modal-card');\n\nexport async function FetchFilmId(id) {\n  await fetchFilmId(id).then(respons => {\n    film = respons;\n    return film;\n  });\n\n  const marcup = markupBtnModalFilm(film);\n  return (modalCardEl.innerHTML = marcup);\n}\n\nexport function clianFilmCard() {\n  return (modalCardEl.innerHTML = '');\n}\n","const KEY = '45074c10b8f2ea3914a60876b2d17a1a';\nconst BASEURL = 'https://api.themoviedb.org/3/';\n\n\nexport function fetchFilmId(movie_id) {\n    const arrFilms = fetch(`${BASEURL}/movie/${movie_id}?api_key=${KEY}`)\nreturn arrFilms.then( response=> {\nif(!response.ok){\n    throw new Error(response.status)\n}\nreturn response.json();\n})\n}\n\n","import { FetchFilmId } from '../markup';\n\nexport function markupBtnModalFilm(film) {\n  return `<img class=\"modal-card__img\"\n     src=\"https://www.themoviedb.org/t/p/w500/${film.poster_path}\"\n     alt=\"\"\n     id=\"\"\n    />\n    <div class=\"modal-card__info\">\n     <h2>${film.title}</h2>\n     <div class=\"table\">\n     <ul class=\"table__parametr\">\n       <li class=\"list\">Vote/Votes </li>\n       <li class=\"list\">Popularity </li>\n       <li class=\"list\">Original Title </li>\n     </ul>\n         <ul class=\"table__value\">\n       <li class=\"list\"><span>${film.vote_average}</span>/<span>${film.vote_count}</span></li>\n       <li class=\"list\">${film.popularity}</li>\n       <li class=\"list\">${film.original_title}</li>\n     </ul>\n     </div>\n     <p>\n       <h3>About</h3>\n       <div>${film.overview}</div>\n     </p>\n     <button class=\"button\">add to Watched</button>\n     <button class=\"button\">add to queue</button>\n      </div>`;\n}\n","// import { testOnClickFetchFilmId } from '../modal'\nimport { refs } from '../../js/reference/homeRefs';\nimport { refs } from '../../js/reference/libraryRefs';\nimport { FetchFilmId } from '../modal';\nimport { clianFilmCard } from './markupFilmForodal';\n\nfunction onClouseModal(e) {\n  refs.backdropEl.classList.add('is-hidden');\n  refs.bodyNoScrollEl.classList.remove('no-scroll');\n  clianFilmCard();\n}\n\nfunction onClouseModalBackdrop(e) {\n  if (e.target === e.currentTarget) {\n    refs.backdropEl.classList.add('is-hidden');\n    refs.bodyNoScrollEl.classList.remove('no-scroll');\n  }\n  return;\n}\n\nfunction onOpenModal(e) {\n  refs.backdropEl.classList.remove('is-hidden');\n  refs.bodyEl.addEventListener('keydown', creatKeydownEscape);\n\n  refs.bodyNoScrollEl.classList.toggle('no-scroll');\n\n  refs.backdropEl.addEventListener('click', onClouseModalBackdrop);\n  refs.buttonCloseEl.addEventListener('click', onClouseModal);\n  function creatKeydownEscape(e) {\n    {\n      if (e.code === 'Escape') {\n      }\n      refs.backdropEl.classList.add('is-hidden');\n      refs.bodyEl.removeEventListener('keydown', creatKeydownEscape);\n    }\n  }\n}\n\nfunction onEventListenerClick(e) {\n  e.preventDefault();\n   if (e.target.closest('.film-card__link')) {\n    FetchFilmId(e.target.closest('.film-card__link').id);\n    onOpenModal();\n  }\n}\n\nexport function onClick(btn) {\n  btn.addEventListener('click', onOpenModal);\n}\n\nexport function onOpenModalFilm() {\n  refs.filmsGalleryEl.addEventListener('click', onEventListenerClick);\n}\n","const BASEURL = 'https://api.themoviedb.org/3/trending/';\nconst keyApi = '894ef72300682f1db325dae2afe3e7e2';\n\nexport function fetchFilmsTrends(page, urlPart) {\n  return fetch(`${BASEURL}${urlPart}?api_key=${keyApi}&page=${page}`).then(\n    response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    }\n  );\n}\n","export function fetchGenreId() {\n  return fetch(\n    'https://api.themoviedb.org/3/genre/movie/list?api_key=894ef72300682f1db325dae2afe3e7e2&language=en-US'\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json();\n  });\n}\n","import { createFilmMarkup } from '../markup/trendfilmsMarkup';\n//const galleryEl = document.querySelector('.films-gallery');\nexport function filmsTrendRender(data, destinationEl) {\n  const imgMarkUp = createFilmMarkup(data.results);\n  destinationEl.insertAdjacentHTML('beforeend', imgMarkUp);\n}\n","import { refs } from './js/reference/homeRefs.js';\nimport { trendsControls } from './js/controls';\nimport { onOpenModalFilm } from './js/modal';\nimport { onClick } from './js/modal';\nimport { scrollToTop } from './js/controls';\n\ntrendsControls();\nonOpenModalFilm();\nonClick(refs.footerBtn);\nscrollToTop();\n"],"names":["$a111eb1c0b418884$export$21666b427502ea6d","bodyEl","document","querySelector","mainEl","logoEl","backdropEl","buttonCloseEl","bodyNoScrollEl","scrollBtnEl","filmCardLinkEl","filmsGalleryEl","footerBtn","$708087666b1a495c$export$e1e489d92e562b7b","genre_ids","genreName","forEach","genre_id","push","$25176f203a4c7d2e$export$88c94c87660d44ec","find","genre","id","name","length","slice","$19aedebb0ec4ed46$export$34f980816dd5ca83","arrFilms","map","original_title","release_date","poster_path","genres","join","Date","getFullYear","$231c2349526b2ef9$var$onScrollShowArrow","window","scrollY","classList","remove","add","$231c2349526b2ef9$var$onClickArrow","scrollTo","$c18020990ddcde5d$export$21666b427502ea6d","loadMoreBtnEl","$61c079253e998c44$var$film","$61c079253e998c44$var$modalCardEl","async","$61c079253e998c44$export$eb977ef7ffa021ce","movie_id","fetch","then","response","ok","Error","status","json","respons","marcup","film","title","vote_average","vote_count","popularity","overview","innerHTML","$008b226b4f7cc992$var$onClouseModal","e","$008b226b4f7cc992$var$onClouseModalBackdrop","target","currentTarget","$008b226b4f7cc992$var$onOpenModal","e1","addEventListener","creatKeydownEscape","code","removeEventListener","toggle","$008b226b4f7cc992$var$onEventListenerClick","preventDefault","closest","page","urlPart","genreId","catch","error","console","log","data","destinationEl","imgMarkUp","results","insertAdjacentHTML"],"version":3,"file":"index.ceb5b48a.js.map"}