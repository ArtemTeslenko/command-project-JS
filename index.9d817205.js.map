{"mappings":"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","sources":["src/js/reference/homeRefs.js","src/js/customFunction/getGenreName.js","src/js/markup/trendfilmsMarkup.js","src/js/controls/trendsControl.js","src/js/modal/markupFilmForodal.js","src/js/modal/fetchFilmId.js","src/js/markup/markupBtnModalFilm.js","src/js/modal/commonModalOpen.js","src/js/requests/fetchFilmsTrends.js","src/js/requests/fetchGenreId.js","src/js/render/filmsTrendRender.js"],"sourcesContent":["export const refs = {\n  logoEl: document.querySelector('.header-logo'),\n};\n","import { genreIdArr } from '../controls/trendsControl';\n\nexport function getGenreName(genre_ids) {\n  let genreName = [];\n\n  genre_ids.forEach(genre_id => {\n    genreName.push(genreIdArr.find(genre => genre.id === genre_id).name);\n  });\n\n  if (genreName.length > 2) {\n    genreName = genreName.slice(0, 2);\n    genreName.push('Other');\n  }\n  return genreName;\n}\n","import { getGenreName } from '../customFunction/getGenreName';\n\nexport function createFilmMarkup(arrFilms) {\n  return arrFilms\n    .map(({ original_title, release_date, genre_ids, poster_path, id }) => {\n      let genres = getGenreName(genre_ids);\n\n      if (genres.length > 2) {\n        genres = genres.slice(0, 2);\n        genres.push('Other');\n      }\n      genres = genres.join(', ');\n\n      const date = new Date(release_date);\n      const yearRelease = date.getFullYear();\n      return `<div class=\"film-card\">\n      <div class=\"film-card__img-box\">\n        <a class=\"film-card__link link\" href=\"\">\n        <img class=\"film-card__img\"\n          src=\"https://www.themoviedb.org/t/p/w500/${poster_path}\"\n          alt=\"\"\n          id=\"${id}\"\n        />\n        </a></div>\n      \n        <div class=\"film-card__info\">\n          <h2 class=\"film-card__name film-card__item\">\n            ${original_title}\n          </h2>\n          <p class=\"film-card__data film-card__item\">\n            ${genres} | ${yearRelease}\n          </p>\n        </div>\n      \n    </div>`;\n    })\n    .join('');\n}\n","import { fetchFilmsTrends } from '../requests';\nimport { fetchGenreId } from '../requests';\nimport { filmsTrendRender } from '../render/filmsTrendRender';\nexport let genreIdArr = [];\nexport function trendsControls() {\n  let page = 1;\n\n  fetchGenreId()\n    .then(genreId => {\n      genreIdArr = genreId.genres;\n    })\n    .catch(error => console.log(error));\n  const uplPart = 'movie/week';\n  fetchFilmsTrends(page, uplPart).then(data => {\n    const destinationEl = document.querySelector('.films-gallery');\n    filmsTrendRender(data, destinationEl);\n  });\n} //это святое\n","import { fetchFilmId } from './fetchFilmId';\nimport { markupBtnModalFilm } from '../markup';\n\nlet film = {};\nconst modalCardEl = document.querySelector('.modal-card');\n\nexport async function FetchFilmId(id) {\n  await fetchFilmId(id).then(respons => {\n    film = respons;\n    return film;\n  });\n\n  console.log('return', film);\n\n  const marcup = markupBtnModalFilm(film);\n  return (modalCardEl.innerHTML = marcup);\n}\n\nexport function clianFilmCard() {\n  return (modalCardEl.innerHTML = '');\n}\n","const KEY = '45074c10b8f2ea3914a60876b2d17a1a';\nconst BASEURL = 'https://api.themoviedb.org/3/';\n\n\nexport function fetchFilmId(movie_id) {\n    const arrFilms = fetch(`${BASEURL}/movie/${movie_id}?api_key=${KEY}`)\nreturn arrFilms.then( response=> {\nif(!response.ok){\n    throw new Error(response.status)\n}\nconsole.log(response);\nreturn response.json();\n})\n}\n\n","import { FetchFilmId } from '../markup';\n\nexport function markupBtnModalFilm(film) {\n  return `<img class=\"modal-card__img\"\n     src=\"https://www.themoviedb.org/t/p/w500/${film.poster_path}\"\n     alt=\"\"\n     id=\"\"\n    />\n    <div class=\"modal-card__info\">\n     <h2>${film.title}</h2>\n     <ul>\n       <li class=\"list\">Vote/Votes <div><span>${film.vote_average}</span>/<span>${film.vote_count}</span></div></li>\n       <li class=\"list\">Popularity <span>${film.popularity}</span></li>\n       <li class=\"list\">Original Title <span>${film.original_title}</span></li>\n     </ul>\n     <p>\n       <h3>About</h3>\n       <div>${film.overview}</div>\n     </p>\n     <button class=\"button\">add to Watched</button>\n     <button class=\"button\">add to queue</button>\n      </div>`;\n}\n","// import { testOnClickFetchFilmId } from '../modal'\nimport { FetchFilmId } from '../modal';\nimport { clianFilmCard } from './markupFilmForodal';\n\nconst backdropEl = document.querySelector('.backdrop');\nconst buttonTestEl = document.querySelector('.test');\nconst buttonClose = document.querySelector('.modal__button');\nconst bodyEl = document.querySelector('body');\nconst mainEl = document.querySelector('main');\nlet filmCardLink = 0;\nlet filmCardLinkId = 0;\n\nfunction onClouseModal(e) {\n  backdropEl.classList.add('is-hidden');\n  clianFilmCard();\n}\n\nfunction onClouseModalBackdrop(e) {\n  if (e.target === e.currentTarget) {\n    backdropEl.classList.add('is-hidden');\n  }\n  return;\n}\n\nfunction onOpenModal(e) {\n  // e.preventDefault();\n  backdropEl.classList.remove('is-hidden');\n  bodyEl.addEventListener('keydown', creatKeydownEscape);\n\n  function creatKeydownEscape(e) {\n    if (e.code === 'Escape') {\n      backdropEl.classList.add('is-hidden');\n      bodyEl.removeEventListener('keydown', creatKeydownEscape);\n    }\n  }\n}\n\nfunction onEventListenerClick(e) {\n  e.preventDefault();\n  filmCardLink = e.target;\n  filmCardLinkId = e.target.id;\n\n  FetchFilmId(filmCardLinkId);\n  onOpenModal(filmCardLink);\n}\n\nexport function onClick(btn) {\n  btn.addEventListener('click', onOpenModal);\n  buttonClose.addEventListener('click', onClouseModal);\n  backdropEl.addEventListener('click', onClouseModalBackdrop);\n}\n\nexport function onOpenModalFilm(e) {\n  mainEl.addEventListener('click', onEventListenerClick);\n  buttonClose.addEventListener('click', onClouseModal);\n  backdropEl.addEventListener('click', onClouseModalBackdrop);\n}\n","const BASEURL = 'https://api.themoviedb.org/3/trending/';\nconst keyApi = '894ef72300682f1db325dae2afe3e7e2';\n\nexport function fetchFilmsTrends(page, urlPart) {\n  return fetch(`${BASEURL}${urlPart}?api_key=${keyApi}&page=${page}`).then(\n    response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    }\n  );\n}\n","export function fetchGenreId() {\n  return fetch(\n    'https://api.themoviedb.org/3/genre/movie/list?api_key=894ef72300682f1db325dae2afe3e7e2&language=en-US'\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json();\n  });\n}\n","import { createFilmMarkup } from '../markup/trendfilmsMarkup';\n//const galleryEl = document.querySelector('.films-gallery');\nexport function filmsTrendRender(data, destinationEl) {\n  const imgMarkUp = createFilmMarkup(data.results);\n  destinationEl.insertAdjacentHTML('beforeend', imgMarkUp);\n}\n"],"names":["document","querySelector","$708087666b1a495c$export$e1e489d92e562b7b","genre_ids","genreName","forEach","genre_id","push","$25176f203a4c7d2e$export$88c94c87660d44ec","find","genre","id","name","length","slice","$19aedebb0ec4ed46$export$34f980816dd5ca83","arrFilms","map","original_title","release_date","poster_path","genres","join","Date","getFullYear","$61c079253e998c44$var$film","$61c079253e998c44$var$modalCardEl","async","$61c079253e998c44$export$eb977ef7ffa021ce","movie_id","fetch","then","response","ok","Error","status","console","log","json","respons","marcup","film","title","vote_average","vote_count","popularity","overview","innerHTML","$008b226b4f7cc992$var$backdropEl","$008b226b4f7cc992$var$buttonClose","$008b226b4f7cc992$var$bodyEl","$008b226b4f7cc992$var$mainEl","$008b226b4f7cc992$var$filmCardLink","$008b226b4f7cc992$var$filmCardLinkId","$008b226b4f7cc992$var$onClouseModal","e","classList","add","$008b226b4f7cc992$var$onClouseModalBackdrop","target","currentTarget","$008b226b4f7cc992$var$onOpenModal","e1","remove","addEventListener","creatKeydownEscape","code","removeEventListener","$008b226b4f7cc992$var$onEventListenerClick","preventDefault","page","urlPart","genreId","catch","error","data","destinationEl","imgMarkUp","results","insertAdjacentHTML"],"version":3,"file":"index.9d817205.js.map"}