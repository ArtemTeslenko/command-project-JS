{"mappings":"yMAIO,SAASA,EAAiBC,GAC/B,OAAOC,MAAM,GAAgCC,OAJ/B,yCAIU,uBAAoCA,OAH/C,mCAGuC,UAAaA,OAALF,IACzDG,MAAK,SAAAC,GACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,M,IAEjBL,MAAK,SAAAM,G,OAAQC,EAAiBD,E,ICV5B,IAAIE,EAAa,GACjB,SAASC,ICFPX,MACL,yGACAE,MAAK,SAAAC,GACL,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAG3B,OAAOH,EAASI,M,IDDfL,MAAK,SAAAU,GACJF,EAAaE,EAAQC,M,IAEtBC,OAAM,SAAAC,G,OAASC,QAAQC,IAAIF,E,IAE9BjB,EARW,E,CEFN,SAASoB,EAAaC,GAC3B,IAAIC,EAAY,GAUhB,OARAD,EAAUE,SAAQ,SAAAC,GAChBF,EAAUG,KAAKb,EAAWc,MAAK,SAAAC,G,OAASA,EAAMC,KAAOJ,C,IAAUK,K,IAG7DP,EAAUQ,OAAS,IACrBR,EAAYA,EAAUS,MAAM,EAAG,IACrBN,KAAK,SAEVH,C,CCXF,SAASU,EAAiBC,GAC/B,OAAOA,EACJC,KAAI,SAAAC,G,IAAGC,EAAcD,EAAdC,eAAgBC,EAAYF,EAAZE,aAAchB,EAASc,EAATd,UAAWiB,EAAWH,EAAXG,YAC3CvB,EAASK,EAAaC,GAE1BN,EAASA,EAAOwB,KAAK,MAErB,IACMC,EADO,IAAIC,KAAKJ,GACGK,cACzB,MAAO,8MAWCvC,OAPuCmC,EAAY,4KAUnDnC,OAHAiC,EAAe,0FAGHjC,OAAZY,EAAO,OAAiBZ,OAAZqC,EAAY,uD,IAMjCD,KAAK,G,CC9BV,IAAMI,EAAYC,SAASC,cAAc,kBAClC,SAASlC,EAAiBD,GAC/B,IAAMoC,EAAYd,EAAiBtB,EAAKqC,SACxCJ,EAAUK,mBAAmB,YAAaF,E,CCF7BF,SAASC,cAAc,QCAtC,IAAMI,EAAUL,SAASC,cAAc,U,+HCFvC,IAAMK,EAAYN,SAASC,cAAc,aAEnCM,GADaP,SAASC,cAAc,SACxBD,SAASC,cAAc,kBACnCO,EAAOR,SAASC,cAAc,QAGpC,SAASQ,EAAcC,GACnBJ,EAAWK,UAAUC,IAAI,Y,CAG7B,SAASC,EAAsBH,GAC1BA,EAAEI,SAASJ,EAAEK,eACfT,EAAWK,UAAUC,IAAI,Y,CAI5B,SAASI,EAAYC,GACjBA,EAAEC,iBACFZ,EAAWK,UAAUQ,OAAO,aAE5BX,EAAOY,iBAAiB,WAE5B,SAASC,EAAmBX,GACX,WAAXA,EAAEY,OACLhB,EAAWK,UAAUC,IAAI,aACzBJ,EAAOe,oBAAoB,UAAWF,G,IAKlC,SAASG,EAAQC,GACtBA,EAAIL,iBAAiB,QAASJ,GAC9BT,EAAYa,iBAAiB,QAASX,GACtCH,EAAWc,iBAAiB,QAASP,E,iBC5BvC,IAAMa,EAAe1B,SAASC,cAAc,SAG1ChC,IACAuD,EAAQE,GFJDrB,EAAQD,mBAAmB,YGJxB,mG","sources":["src/js/requests/fetchFilmsTrends.js","src/js/controls/trendsControl.js","src/js/requests/fetchGenreId.js","src/js/customFunction/getGenreName.js","src/js/markup/trendfilmsMarkup.js","src/js/render/filmsTrendRender.js","src/js/render/testRender.js","src/js/render/renderBtnModalFilm.js","src/js/modal/commonModalOpen.js","src/js/common.js","src/js/markup/markupBtnModalFilm.js"],"sourcesContent":["import { filmsTrendRender } from '../render/filmsTrendRender';\nconst BASEURL = 'https://api.themoviedb.org/3/trending/';\nconst keyApi = '894ef72300682f1db325dae2afe3e7e2';\n\nexport function fetchFilmsTrends(page) {\n  return fetch(`${BASEURL}movie/week?api_key=${keyApi}&page=${page}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(data => filmsTrendRender(data));\n}\n","import { fetchFilmsTrends } from '../requests';\nimport { fetchGenreId } from '../requests';\nexport let genreIdArr = [];\nexport function trendsControls() {\n  let page = 1;\n\n  fetchGenreId()\n    .then(genreId => {\n      genreIdArr = genreId.genres;\n    })\n    .catch(error => console.log(error));\n\n  fetchFilmsTrends(page);\n}\n","export function fetchGenreId() {\n  return fetch(\n    'https://api.themoviedb.org/3/genre/movie/list?api_key=894ef72300682f1db325dae2afe3e7e2&language=en-US'\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json();\n  });\n}\n","import { genreIdArr } from '../controls/trendsControl';\n\nexport function getGenreName(genre_ids) {\n  let genreName = [];\n\n  genre_ids.forEach(genre_id => {\n    genreName.push(genreIdArr.find(genre => genre.id === genre_id).name);\n  });\n\n  if (genreName.length > 2) {\n    genreName = genreName.slice(0, 2);\n    genreName.push('Other');\n  }\n  return genreName;\n}\n","import { getGenreName } from '../customFunction/getGenreName';\n\nexport function createFilmMarkup(arrFilms) {\n  return arrFilms\n    .map(({ original_title, release_date, genre_ids, poster_path }) => {\n      let genres = getGenreName(genre_ids);\n\n      genres = genres.join(', ');\n\n      const date = new Date(release_date);\n      const yearRelease = date.getFullYear();\n      return `<div class=\"film-card\">\n      <div class=\"film-card__img-box\">\n        <a class=\"film-card__link link\" href=\"\">\n        <img class=\"film-card__img\"\n          src=\"https://www.themoviedb.org/t/p/w500/${poster_path}\"\n          alt=\"\"\n        />\n        </a></div>\n      \n        <div class=\"film-card__info\">\n          <h2 class=\"film-card__name film-card__item\">\n            ${original_title}\n          </h2>\n          <p class=\"film-card__data film-card__item\">\n            ${genres} | ${yearRelease}\n          </p>\n        </div>\n      \n    </div>`;\n    })\n    .join('');\n}\n","import { createFilmMarkup } from '../markup/trendfilmsMarkup';\nconst galleryEl = document.querySelector('.films-gallery');\nexport function filmsTrendRender(data) {\n  const imgMarkUp = createFilmMarkup(data.results);\n  galleryEl.insertAdjacentHTML('beforeend', imgMarkUp);\n}\n","import { markupTrending } from '../markup';\n\nconst mainEl = document.querySelector('main');\n\nexport function testRender(data) {\n  return data.results.map(item =>\n    mainEl.insertAdjacentHTML('beforeend', markupTrending(item.poster_path))\n  );\n}\n","import { markupBtnModalFilm } from '../markup';\n\nconst modalEl = document.querySelector('.modal');\n\nexport function renderBtnModalFilm(data) {\n  return modalEl.insertAdjacentHTML('beforeend', markupBtnModalFilm());\n}\n","const backdropEl =document.querySelector(\".backdrop\")\nconst buttonTestEl=document.querySelector(\".test\")\nconst buttonClose=document.querySelector(\".modal-button\")\nconst bodyEl=document.querySelector(\"body\")\n\n\nfunction onClouseModal(e) {\n    backdropEl.classList.add(\"is-hidden\")\n  }\n\nfunction onClouseModalBackdrop(e) {\n  if(e.target===e.currentTarget)\n  {backdropEl.classList.add(\"is-hidden\")}\n  return\n  } \n\nfunction onOpenModal(e) {\n    e.preventDefault();\n    backdropEl.classList.remove(\"is-hidden\")\n\n    bodyEl.addEventListener('keydown', creatKeydownEscape);\n\nfunction creatKeydownEscape(e) {\n  if (e.code === \"Escape\") {\n   backdropEl.classList.add(\"is-hidden\")\n   bodyEl.removeEventListener('keydown', creatKeydownEscape);\n  }\n}\n}\n\nexport function onClick(btn) {\n  btn.addEventListener('click', onOpenModal)\n  buttonClose.addEventListener('click', onClouseModal)\n  backdropEl.addEventListener(\"click\", onClouseModalBackdrop)\n}","// import { fetchTrending } from './requests';\nimport { renderBtnModalFilm } from './render';\nimport { onClick } from './modal';\nimport { trendsControls } from './controls';\n\nconst buttonTestEl = document.querySelector('.test');\nexport function renderAll() {\n  // fetchTrending();\n  trendsControls();\n  onClick(buttonTestEl);\n  renderBtnModalFilm();\n}\n","export function markupBtnModalFilm() {\n    return `<button class=\"button\">add to Watched</button>\n    <button class=\"button\">add to queue</button>`;\n  }"],"names":["$43e97f4e0f3a43da$export$25311eb0e0625687","page","fetch","concat","then","response","ok","Error","status","json","data","$6efd800b6dc5a170$export$e034e57e3a7a732f","$04fd42e164da4557$export$88c94c87660d44ec","$04fd42e164da4557$export$35de0e194fa031c","genreId","genres","catch","error","console","log","$1ec551874a3bf7d9$export$e1e489d92e562b7b","genre_ids","genreName","forEach","genre_id","push","find","genre","id","name","length","slice","$1b097b81f356504c$export$34f980816dd5ca83","arrFilms","map","param","original_title","release_date","poster_path","join","yearRelease","Date","getFullYear","$6efd800b6dc5a170$var$galleryEl","document","querySelector","imgMarkUp","results","insertAdjacentHTML","$6c6a616148fd5a03$var$modalEl","$952a15c298e5f2e9$var$backdropEl","$952a15c298e5f2e9$var$buttonClose","$952a15c298e5f2e9$var$bodyEl","$952a15c298e5f2e9$var$onClouseModal","e","classList","add","$952a15c298e5f2e9$var$onClouseModalBackdrop","target","currentTarget","$952a15c298e5f2e9$var$onOpenModal","e1","preventDefault","remove","addEventListener","creatKeydownEscape","code","removeEventListener","$952a15c298e5f2e9$export$1d5a917feb871989","btn","$b7383fa2020d36b2$var$buttonTestEl"],"version":3,"file":"index.d295c8f6.js.map"}